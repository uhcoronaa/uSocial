<div class="container py-5 px-4">
    <!-- For demo purpose>
    <header class="text-center">
      <h1 class="display-4 text-white"></h1>
    </header-->

    <div class="row rounded-lg overflow-hidden shadow" style="min-width: 400px;">
        <!-- Users box-->
        <div class="col-5 px-0">
            <div class="bg-white">

                <div class="bg-gray px-4 py-2 bg-light">
                    <p class="h5 mb-0 py-1">Amigos</p>
                </div>

                <div class="messages-box">
                    <div class="list-group rounded-0">

                        <a *ngFor="let friend of friends" (click)="selectFriend(friend)" class="list-group-item list-group-item-action list-group-item-light rounded-0">
                            <div class="media">
                                <img [src]="friend.user_picture_location ? friend.user_picture_location : 'https://res.cloudinary.com/mhmd/image/upload/v1564960395/avatar_usae7z.svg'" alt="user" width="50" height="50" class="rounded-circle">
                                <div class="media-body ml-4 d-none d-md-block">
                                    <div class="d-flex align-items-center justify-content-between mb-1">
                                        <h3 class="mb-0">{{friend.full_name}}</h3>
                                        <!--small class="small font-weight-bold">25 Dec</small-->
                                    </div>
                                    <div class="d-flex align-items-center justify-content-between mb-1">
                                        <h3 class="mb-0">@{{friend.username}}</h3>
                                        <!--small class="small font-weight-bold">25 Dec</small-->
                                    </div>
                                    <!--p class="font-italic mb-0 text-small">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore.</p-->
                                </div>
                            </div>
                        </a>

                    </div>
                </div>
            </div>
        </div>


        <!-- Chat Box-->
        <div class="col-7 px-0">
            <div class="bg-gray px-4 py-2 bg-light">
                <p class="h5 mb-0 py-1">{{friend.full_name}}</p>
            </div>
            <div class="px-4 py-5 chat-box bg-white">
                <div *ngFor="let message of messages">
                    <!-- Sender Message-->
                    <div [className]="message.id_user_sent != id_user_loggedin ? 'media w-50 mb-3' : 'media w-50 ml-auto mb-3'">
                        <img *ngIf="message.id_user_sent != id_user_loggedin" [src]="imgurl ? imgurl : 'https://res.cloudinary.com/mhmd/image/upload/v1564960395/avatar_usae7z.svg'" alt="user" width="50" height="50" class="rounded-circle">
                        <div [className]="message.id_user_sent != id_user_loggedin ? 'media-body ml-3' : 'media-body'">
                            <div [className]="message.id_user_sent != id_user_loggedin ? 'bg-light rounded py-2 px-3 mb-2' : 'bg-primary rounded py-2 px-3 mb-2 text-white'">
                                <p [className]="message.id_user_sent != id_user_loggedin ? 'text-small mb-0 text-muted' : 'text-small mb-0 text-white'">{{message.message}}</p>
                            </div>
                            <p class="small text-muted">{{message.date_sent | date:'medium'}}</p>
                        </div>
                    </div>
                </div>


            </div>

            <!-- Typing area -->
            <form action="#" class="bg-light">
                <div class="input-group">
                    <input (keypress)="keyPress($event)" type="text" placeholder="Escribir un mensaje" [(ngModel)]="message.message" name="Mess" aria-describedby="button-addon2" class="form-control rounded-0 border-0 py-4 bg-light">
                    <div class="input-group-append">
                        <button (click)="sendMessage()" id="button-addon2" type="submit" class="btn btn-link"> <i class="fa fa-paper-plane"></i></button>
                    </div>
                </div>
            </form>

        </div>
    </div>
</div>